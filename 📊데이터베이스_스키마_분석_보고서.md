# ğŸ“Š TaskFlowMaster ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¶„ì„ ë³´ê³ ì„œ

## ğŸ” ë¶„ì„ ê°œìš”
- **ë¶„ì„ ì¼ì‹œ**: 2025-01-20
- **ë¶„ì„ ëª©ì **: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ í•´ê²°
- **ë¶„ì„ ë²”ìœ„**: ì „ì²´ í”„ë¡œì íŠ¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ íŒŒì¼

## ğŸ“ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ê²½ë¡œ

### 1. ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼
```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ taskflow.db (36KB) - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼
â””â”€â”€ app.db (0B) - ë¹ˆ íŒŒì¼
```

### 2. ìŠ¤í‚¤ë§ˆ ê´€ë ¨ íŒŒì¼
```
í”„ë¡œì íŠ¸ êµ¬ì¡°/
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ schema.ts - ë©”ì¸ ìŠ¤í‚¤ë§ˆ ì •ì˜ (Drizzle ORM)
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ db.ts - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° í…Œì´ë¸” ìƒì„±
â”‚   â”œâ”€â”€ init-db.ts - ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ storage.ts - ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´
â”‚   â””â”€â”€ routes.ts - API ë¼ìš°íŠ¸
â””â”€â”€ drizzle.config.ts - Drizzle ì„¤ì •
```

## âš ï¸ ë°œê²¬ëœ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ

### 1. í…Œì´ë¸” ì´ë¦„ ë¶ˆì¼ì¹˜

#### ğŸ”´ **ì‹¬ê°í•œ ë¶ˆì¼ì¹˜**: tasks vs daily_tasks
- **server/db.ts**: `tasks` í…Œì´ë¸” ìƒì„±
- **shared/schema.ts**: `dailyTasks` (í…Œì´ë¸”ëª…: `daily_tasks`) ì •ì˜
- **server/init-db.ts**: `tasks` í…Œì´ë¸” import (ì¡´ì¬í•˜ì§€ ì•ŠìŒ)

```sql
-- server/db.tsì—ì„œ ìƒì„±í•˜ëŠ” í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS tasks (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT,
  category TEXT NOT NULL,
  status TEXT DEFAULT 'pending',
  priority TEXT DEFAULT 'medium',
  progress INTEGER DEFAULT 0,
  assigned_to INTEGER NOT NULL,
  created_by INTEGER NOT NULL,
  start_date DATETIME NOT NULL,
  due_date DATETIME NOT NULL,
  completed_at DATETIME,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
)
```

```typescript
// shared/schema.tsì—ì„œ ì •ì˜í•˜ëŠ” í…Œì´ë¸”
export const dailyTasks = sqliteTable("daily_tasks", {
  id: integer("id").primaryKey({ autoIncrement: true }),
  title: text("title").notNull(),
  description: text("description"),
  assignedTo: integer("assigned_to").notNull(),
  createdBy: integer("created_by").notNull(),
  category: text("category").notNull(),
  status: text("status", { 
    enum: ["scheduled", "in_progress", "completed", "cancelled", "postponed"] 
  }).notNull().default("scheduled"),
  // ... ë” ë§ì€ í•„ë“œë“¤
});
```

### 2. í•„ë“œ êµ¬ì¡° ì°¨ì´ì 

#### tasks (server/db.ts) vs daily_tasks (shared/schema.ts)

| í•„ë“œëª… | server/db.ts | shared/schema.ts | ì°¨ì´ì  |
|--------|--------------|------------------|--------|
| status | 'pending' | 'scheduled' | ê¸°ë³¸ê°’ ë‹¤ë¦„ |
| ì¶”ê°€ í•„ë“œ | ì—†ìŒ | workDate, startTime, endTime, estimatedHours, actualHours, memo, weeklyTaskId, followUp ê´€ë ¨ í•„ë“œë“¤, ë°˜ë³µì—…ë¬´ ê´€ë ¨ í•„ë“œë“¤ | schema.tsê°€ í›¨ì”¬ ìƒì„¸í•¨ |

### 3. Import ì˜¤ë¥˜

#### server/init-db.ts
```typescript
// âŒ ì˜ëª»ëœ import - tasks í…Œì´ë¸”ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
import { users, tasks, notifications } from "@shared/schema";

// âœ… ì˜¬ë°”ë¥¸ import 
import { users, dailyTasks, weeklyTasks, notifications } from "@shared/schema";
```

## ğŸ“‹ ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” í…Œì´ë¸” ëª©ë¡

### shared/schema.tsì— ì •ì˜ëœ í…Œì´ë¸”ë“¤
1. **users** - ì‚¬ìš©ì ì •ë³´
2. **daily_tasks** - ì¼ê°„ ì—…ë¬´ (ë©”ì¸ ì—…ë¬´ í…Œì´ë¸”)
3. **weekly_tasks** - ì£¼ê°„ ì—…ë¬´
4. **weekly_reports** - ì£¼ê°„ ë³´ê³ ì„œ
5. **task_analytics** - ì—…ë¬´ ë¶„ì„
6. **comments** - ëŒ“ê¸€
7. **attachments** - ì²¨ë¶€íŒŒì¼
8. **notifications** - ì•Œë¦¼
9. **schedules** - ì¼ì • ê´€ë¦¬
10. **schedule_instances** - ë°˜ë³µ ì¼ì • ì¸ìŠ¤í„´ìŠ¤

### server/db.tsì—ì„œ ìƒì„±í•˜ëŠ” í…Œì´ë¸”ë“¤
1. **users** âœ… (ì¼ì¹˜)
2. **tasks** âŒ (schema.tsì— ì—†ìŒ)
3. **comments** âœ… (ì¼ì¹˜)
4. **notifications** âœ… (ì¼ì¹˜)
5. **attachments** âœ… (ì¼ì¹˜)

## ğŸ”§ í•´ê²° ë°©ì•ˆ

### ë°©ì•ˆ 1: server/db.ts ìˆ˜ì • (ê¶Œì¥)
- `tasks` í…Œì´ë¸”ì„ `daily_tasks`ë¡œ ë³€ê²½
- í•„ë“œ êµ¬ì¡°ë¥¼ schema.tsì™€ ì¼ì¹˜ì‹œí‚´
- `weekly_tasks` í…Œì´ë¸” ì¶”ê°€

### ë°©ì•ˆ 2: schema.ts ìˆ˜ì •
- `dailyTasks`ë¥¼ `tasks`ë¡œ ë³€ê²½
- í•˜ì§€ë§Œ ì´ë¯¸ ë§ì€ ì½”ë“œì—ì„œ `dailyTasks` ì‚¬ìš© ì¤‘

### ë°©ì•ˆ 3: ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- ê¸°ì¡´ `tasks` ë°ì´í„°ë¥¼ `daily_tasks`ë¡œ ì´ì „
- ìƒˆë¡œìš´ í•„ë“œë“¤ ì¶”ê°€

## ğŸ¯ ê¶Œì¥ í•´ê²° ìˆœì„œ

1. **server/init-db.ts ìˆ˜ì •**
   ```typescript
   import { users, dailyTasks, weeklyTasks, notifications } from "@shared/schema";
   ```

2. **server/db.tsì˜ initializeTables() í•¨ìˆ˜ ì œê±° ë˜ëŠ” ìˆ˜ì •**
   - Drizzle ORMì´ schema.tsë¥¼ ê¸°ë°˜ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
   - ìˆ˜ë™ CREATE TABLE êµ¬ë¬¸ ë¶ˆí•„ìš”

3. **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
   - ê¸°ì¡´ `tasks` í…Œì´ë¸” ë°ì´í„°ë¥¼ `daily_tasks`ë¡œ ì´ì „

4. **í…ŒìŠ¤íŠ¸ ë° ê²€ì¦**
   - ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
   - ë°ì´í„° ë¬´ê²°ì„± í™•ì¸

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

| êµ¬ë¶„ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| ìŠ¤í‚¤ë§ˆ ì •ì˜ | âœ… ì™„ë£Œ | shared/schema.ts |
| í…Œì´ë¸” ìƒì„± | âŒ ë¶ˆì¼ì¹˜ | server/db.ts |
| ë°ì´í„° ì•¡ì„¸ìŠ¤ | âœ… ì •ìƒ | storage.tsëŠ” schema.ts ì‚¬ìš© |
| API ë¼ìš°íŠ¸ | âœ… ì •ìƒ | routes.tsëŠ” schema.ts ì‚¬ìš© |
| ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ | âŒ ì˜¤ë¥˜ | init-db.tsì—ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í…Œì´ë¸” import |

## ğŸš¨ ì¦‰ì‹œ ìˆ˜ì • í•„ìš” ì‚¬í•­

1. **server/init-db.ts** - import ì˜¤ë¥˜ ìˆ˜ì •
2. **server/db.ts** - í…Œì´ë¸” ìƒì„± ë¡œì§ ìˆ˜ì • ë˜ëŠ” ì œê±°
3. **ë°ì´í„° ì¼ê´€ì„±** - ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

---
*ë¶„ì„ ì™„ë£Œ: 2025-01-20* 

## ğŸ” ë¶„ì„ ê°œìš”
- **ë¶„ì„ ì¼ì‹œ**: 2025-01-20
- **ë¶„ì„ ëª©ì **: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ í•´ê²°
- **ë¶„ì„ ë²”ìœ„**: ì „ì²´ í”„ë¡œì íŠ¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ íŒŒì¼

## ğŸ“ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ê²½ë¡œ

### 1. ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼
```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ taskflow.db (36KB) - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼
â””â”€â”€ app.db (0B) - ë¹ˆ íŒŒì¼
```

### 2. ìŠ¤í‚¤ë§ˆ ê´€ë ¨ íŒŒì¼
```
í”„ë¡œì íŠ¸ êµ¬ì¡°/
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ schema.ts - ë©”ì¸ ìŠ¤í‚¤ë§ˆ ì •ì˜ (Drizzle ORM)
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ db.ts - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° í…Œì´ë¸” ìƒì„±
â”‚   â”œâ”€â”€ init-db.ts - ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ storage.ts - ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´
â”‚   â””â”€â”€ routes.ts - API ë¼ìš°íŠ¸
â””â”€â”€ drizzle.config.ts - Drizzle ì„¤ì •
```

## âš ï¸ ë°œê²¬ëœ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ë¬¸ì œ

### 1. í…Œì´ë¸” ì´ë¦„ ë¶ˆì¼ì¹˜

#### ğŸ”´ **ì‹¬ê°í•œ ë¶ˆì¼ì¹˜**: tasks vs daily_tasks
- **server/db.ts**: `tasks` í…Œì´ë¸” ìƒì„±
- **shared/schema.ts**: `dailyTasks` (í…Œì´ë¸”ëª…: `daily_tasks`) ì •ì˜
- **server/init-db.ts**: `tasks` í…Œì´ë¸” import (ì¡´ì¬í•˜ì§€ ì•ŠìŒ)

```sql
-- server/db.tsì—ì„œ ìƒì„±í•˜ëŠ” í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS tasks (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT,
  category TEXT NOT NULL,
  status TEXT DEFAULT 'pending',
  priority TEXT DEFAULT 'medium',
  progress INTEGER DEFAULT 0,
  assigned_to INTEGER NOT NULL,
  created_by INTEGER NOT NULL,
  start_date DATETIME NOT NULL,
  due_date DATETIME NOT NULL,
  completed_at DATETIME,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
)
```

```typescript
// shared/schema.tsì—ì„œ ì •ì˜í•˜ëŠ” í…Œì´ë¸”
export const dailyTasks = sqliteTable("daily_tasks", {
  id: integer("id").primaryKey({ autoIncrement: true }),
  title: text("title").notNull(),
  description: text("description"),
  assignedTo: integer("assigned_to").notNull(),
  createdBy: integer("created_by").notNull(),
  category: text("category").notNull(),
  status: text("status", { 
    enum: ["scheduled", "in_progress", "completed", "cancelled", "postponed"] 
  }).notNull().default("scheduled"),
  // ... ë” ë§ì€ í•„ë“œë“¤
});
```

### 2. í•„ë“œ êµ¬ì¡° ì°¨ì´ì 

#### tasks (server/db.ts) vs daily_tasks (shared/schema.ts)

| í•„ë“œëª… | server/db.ts | shared/schema.ts | ì°¨ì´ì  |
|--------|--------------|------------------|--------|
| status | 'pending' | 'scheduled' | ê¸°ë³¸ê°’ ë‹¤ë¦„ |
| ì¶”ê°€ í•„ë“œ | ì—†ìŒ | workDate, startTime, endTime, estimatedHours, actualHours, memo, weeklyTaskId, followUp ê´€ë ¨ í•„ë“œë“¤, ë°˜ë³µì—…ë¬´ ê´€ë ¨ í•„ë“œë“¤ | schema.tsê°€ í›¨ì”¬ ìƒì„¸í•¨ |

### 3. Import ì˜¤ë¥˜

#### server/init-db.ts
```typescript
// âŒ ì˜ëª»ëœ import - tasks í…Œì´ë¸”ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
import { users, tasks, notifications } from "@shared/schema";

// âœ… ì˜¬ë°”ë¥¸ import 
import { users, dailyTasks, weeklyTasks, notifications } from "@shared/schema";
```

## ğŸ“‹ ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” í…Œì´ë¸” ëª©ë¡

### shared/schema.tsì— ì •ì˜ëœ í…Œì´ë¸”ë“¤
1. **users** - ì‚¬ìš©ì ì •ë³´
2. **daily_tasks** - ì¼ê°„ ì—…ë¬´ (ë©”ì¸ ì—…ë¬´ í…Œì´ë¸”)
3. **weekly_tasks** - ì£¼ê°„ ì—…ë¬´
4. **weekly_reports** - ì£¼ê°„ ë³´ê³ ì„œ
5. **task_analytics** - ì—…ë¬´ ë¶„ì„
6. **comments** - ëŒ“ê¸€
7. **attachments** - ì²¨ë¶€íŒŒì¼
8. **notifications** - ì•Œë¦¼
9. **schedules** - ì¼ì • ê´€ë¦¬
10. **schedule_instances** - ë°˜ë³µ ì¼ì • ì¸ìŠ¤í„´ìŠ¤

### server/db.tsì—ì„œ ìƒì„±í•˜ëŠ” í…Œì´ë¸”ë“¤
1. **users** âœ… (ì¼ì¹˜)
2. **tasks** âŒ (schema.tsì— ì—†ìŒ)
3. **comments** âœ… (ì¼ì¹˜)
4. **notifications** âœ… (ì¼ì¹˜)
5. **attachments** âœ… (ì¼ì¹˜)

## ğŸ”§ í•´ê²° ë°©ì•ˆ

### ë°©ì•ˆ 1: server/db.ts ìˆ˜ì • (ê¶Œì¥)
- `tasks` í…Œì´ë¸”ì„ `daily_tasks`ë¡œ ë³€ê²½
- í•„ë“œ êµ¬ì¡°ë¥¼ schema.tsì™€ ì¼ì¹˜ì‹œí‚´
- `weekly_tasks` í…Œì´ë¸” ì¶”ê°€

### ë°©ì•ˆ 2: schema.ts ìˆ˜ì •
- `dailyTasks`ë¥¼ `tasks`ë¡œ ë³€ê²½
- í•˜ì§€ë§Œ ì´ë¯¸ ë§ì€ ì½”ë“œì—ì„œ `dailyTasks` ì‚¬ìš© ì¤‘

### ë°©ì•ˆ 3: ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- ê¸°ì¡´ `tasks` ë°ì´í„°ë¥¼ `daily_tasks`ë¡œ ì´ì „
- ìƒˆë¡œìš´ í•„ë“œë“¤ ì¶”ê°€

## ğŸ¯ ê¶Œì¥ í•´ê²° ìˆœì„œ

1. **server/init-db.ts ìˆ˜ì •**
   ```typescript
   import { users, dailyTasks, weeklyTasks, notifications } from "@shared/schema";
   ```

2. **server/db.tsì˜ initializeTables() í•¨ìˆ˜ ì œê±° ë˜ëŠ” ìˆ˜ì •**
   - Drizzle ORMì´ schema.tsë¥¼ ê¸°ë°˜ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
   - ìˆ˜ë™ CREATE TABLE êµ¬ë¬¸ ë¶ˆí•„ìš”

3. **ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
   - ê¸°ì¡´ `tasks` í…Œì´ë¸” ë°ì´í„°ë¥¼ `daily_tasks`ë¡œ ì´ì „

4. **í…ŒìŠ¤íŠ¸ ë° ê²€ì¦**
   - ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
   - ë°ì´í„° ë¬´ê²°ì„± í™•ì¸

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

| êµ¬ë¶„ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| ìŠ¤í‚¤ë§ˆ ì •ì˜ | âœ… ì™„ë£Œ | shared/schema.ts |
| í…Œì´ë¸” ìƒì„± | âŒ ë¶ˆì¼ì¹˜ | server/db.ts |
| ë°ì´í„° ì•¡ì„¸ìŠ¤ | âœ… ì •ìƒ | storage.tsëŠ” schema.ts ì‚¬ìš© |
| API ë¼ìš°íŠ¸ | âœ… ì •ìƒ | routes.tsëŠ” schema.ts ì‚¬ìš© |
| ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ | âŒ ì˜¤ë¥˜ | init-db.tsì—ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í…Œì´ë¸” import |

## ğŸš¨ ì¦‰ì‹œ ìˆ˜ì • í•„ìš” ì‚¬í•­

1. **server/init-db.ts** - import ì˜¤ë¥˜ ìˆ˜ì •
2. **server/db.ts** - í…Œì´ë¸” ìƒì„± ë¡œì§ ìˆ˜ì • ë˜ëŠ” ì œê±°
3. **ë°ì´í„° ì¼ê´€ì„±** - ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

---
*ë¶„ì„ ì™„ë£Œ: 2025-01-20* 
 
 
 
 